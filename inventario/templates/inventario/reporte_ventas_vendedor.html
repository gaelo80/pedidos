{% extends 'inventario/base.html' %}
{% load humanize %}

{% block content %}
<h2>{{ titulo }}</h2>

<form method="get" class="mb-4 mt-3 bg-light p-3 rounded border"> {# Añadimos un poco de margen superior (mt-3) #}
    <div class="row g-3 align-items-end"> {# g-3 añade espacio entre columnas del grid #}
        <div class="col-md-4">
            <label for="fecha_desde" class="form-label fw-bold">Desde Fecha:</label>
            {# El valor viene del contexto que envía la vista #}
            <input type="date" name="fecha_desde" id="fecha_desde" class="form-control form-control-sm" value="{{ fecha_desde_str|default:'' }}">
        </div>
        <div class="col-md-4">
            <label for="fecha_hasta" class="form-label fw-bold">Hasta Fecha:</label>
            <input type="date" name="fecha_hasta" id="fecha_hasta" class="form-control form-control-sm" value="{{ fecha_hasta_str|default:'' }}">
        </div>
        <div class="col-md-4">
            {# Botones van en la misma fila para mejor alineación #}
            <button type="submit" class="btn btn-primary btn-sm w-100 mb-1">Aplicar Filtros</button>
            {# Asegúrate que el nombre de la URL sea el correcto para ESTA vista #}
            <a href="{% url 'reporte_ventas_vendedor' %}" class="btn btn-secondary btn-sm w-100 mt-1">Limpiar Filtros</a> 
        </div>
    </div>
</form>
<hr> {# Separador opcional #}

<div class="table-responsive mt-4">
    <table class="table table-striped table-hover table-sm">
        <thead class="table-dark">
            <tr>
                <th>Vendedor</th>
                <th class="text-center">Total Unidades</th>
                {# --- Columna de Valor ELIMINADA --- #}
            </tr>
        </thead>
        <tbody>
            {% for vendedor_data in report_data %}
                <tr>
                    <td>
                        {% firstof vendedor_data.user__first_name vendedor_data.user__last_name vendedor_data.user__username %}
                        {% if vendedor_data.user__first_name and vendedor_data.user__last_name %}
                             {#{{ vendedor_data.user__first_name }} {{ vendedor_data.user__last_name }}#}
                        {% else %}
                             ({{ vendedor_data.user__username }})
                        {% endif %}
                    </td>
                    <td class="text-center">{{ vendedor_data.total_unidades|intcomma }}</td>
                    {# --- Celda de Valor ELIMINADA --- #}
                </tr>
              {% empty %}
                <tr>
                    {# --- Colspan ajustado a 2 --- #}
                    <td colspan="2" class="text-center">No hay datos de ventas para mostrar según los criterios.</td>
                </tr>
            {% endfor %}
        </tbody>
        {# --- Fila de Totales Generales (solo unidades) --- #}
        {% if es_admin_general %}
        <tfoot class="table-group-divider fw-bold">
             <tr>
                 <td><strong>TOTAL GENERAL</strong></td>
                 <td class="text-center"><strong>{{ total_general_unidades|intcomma }}</strong></td>
                 {# --- Celda de Valor ELIMINADA --- #}
             </tr>
        </tfoot>
        {% endif %}
    </table>
</div>

{# ... (resto de la plantilla, como el placeholder para filtros) ... #}

{% endblock content %}